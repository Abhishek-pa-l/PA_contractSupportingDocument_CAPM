sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/ui/model/json/JSONModel"],function(e){"use strict";return e.extend("pa.insurancedocument.painsurancedocumentui.controller.View1",{onInit:function(){this.getView().setModel(new JSONModel,"fileData");let e=new JSONModel([{contract:"",customer:"",history:"",validityStart:"",expiryDate:"",iDateOfSubmission:"",fDateOfSubmission:""}]);this.getView().setModel(e,"formModel");let t=new Date;let a=this.getView().getModel("formModel");a.setProperty("/iDateOfSubmission",t);a.setProperty("/fDateOfSubmission",t)},onFileChange:function(e){const t=e.getParameter("files")[0];const a=e.getSource().getId();const n=new FileReader;const i=this.getView().getModel("fileData");if(a.includes("fileUploader")&&!a.includes("fileUploader2")){i.setProperty("/uploadInsuranceAttachment",null);console.log("Cleared previous Insurance Attachment")}else if(a.includes("fileUploader2")){i.setProperty("/uploadFinancialAttachment",null);console.log("Cleared previous Financial Attachment")}n.onload=function(e){const t=e.target.result.split(",")[1];if(a.includes("fileUploader")&&!a.includes("fileUploader2")){i.setProperty("/uploadInsuranceAttachment",t);console.log("Base64 Encoded Insurance File Content:",t)}else if(a.includes("fileUploader2")){i.setProperty("/uploadFinancialAttachment",t);console.log("Base64 Encoded Financial File Content:",t)}};n.readAsDataURL(t);MessageToast.show("File selected: "+t.name)},onSave:function(){let e=this.getOwnerComponent().getModel();let t=[];let a=[];let n=this.getView().getModel("fileData");let i=this.getView().byId("validitystart").getDateValue();let o=this.getView().byId("expirydate").getDateValue();let s=this.getView().byId("submissiondate").getDateValue();let l=n.getProperty("/uploadInsuranceAttachment");let r=n.getProperty("/uploadFinancialAttachment");debugger;t.push({validityStart:i,expiryDate:o,dateOfSubmission:s,uploadInsuranceAttachment:l});a.push({dateOfSubmission:s,uploadFinancialAttachment:r});let c={contract:"con10001",customer:"kpo",history:"history",insurance_item:t,financial_item:a};e.create("/Header_T",c,{success:function(){MessageToast.show("Data saved successfully!")},error:function(e){MessageToast.show("Error while saving data.")}})}})});
//# sourceMappingURL=View1.controller.js.map